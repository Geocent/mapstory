{% extends "page_layout.html" %}

{% block extra_head %}
<style type="text/css">
    .section {
        background: #F47A20;
    }
    .topic-list li {
        list-style: none;
    }
    #section-dropdown .dropdown-menu {
        height: 25em;
        overflow: auto;
    }
    .btn {
        font-style: none;
        font-weight: normal;
    }
</style>
{% endblock %}

{% block main %}

<div class="row">
    <div class="span12">
        <div class="btn-group" id="topic-dropdown">
            <button class="btn dropdown-toggle" data-toggle="dropdown">
                Sections<span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                {% for s in sections %}
                <li class="section">{{s.name}}</li>
                <ul class="topic-list">
                    {% for t in s.topics.all %}
                    <li><a href="#{{ t.pk }}">{{ t.name }}</a></li>
                    {% endfor %}
                </ul>
                {% endfor %}
            </ul>
        </div>
        <div class="selected-topics-list">
            <h4>Selected Topics</h4>
            {% for t in topic_object.topic_set.all %}
            <a class="btn" href="topic-{{t.pk}}">
                <i class="icon-remove"></i>{{t.name}}
            </a>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}


{% block extra_body %}
<script type="text/javascript">
{% autoescape off %}
$(function(objectid) {
    $("#topic-dropdown a").click(function(ev) {
        ev.preventDefault();
        $.post( "{% url topics_api topic_object.pk %}", {
            'topics' : $(this).attr('href').substring(1)
        })
    });
});  
{% endautoescape %}
</script>
{% endblock %}